{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.diffStringsRaw = exports.diffStringsUnified = exports.createPatchMark = exports.printDiffLines = exports.printAnnotation = exports.countChanges = exports.hasCommonDiff = exports.printCommonLine = exports.printInsertLine = exports.printDeleteLine = void 0;\n\nvar _cleanupSemantic = require('./cleanupSemantic');\n\nvar _diffLines = require('./diffLines');\n\nvar _diffStrings = _interopRequireDefault(require('./diffStrings'));\n\nvar _getAlignedDiffs = _interopRequireDefault(require('./getAlignedDiffs'));\n\nvar _joinAlignedDiffs = require('./joinAlignedDiffs');\n\nvar _normalizeDiffOptions = require('./normalizeDiffOptions');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nvar formatTrailingSpaces = function formatTrailingSpaces(line, trailingSpaceFormatter) {\n  return line.replace(/\\s+$/, function (match) {\n    return trailingSpaceFormatter(match);\n  });\n};\n\nvar printDiffLine = function printDiffLine(line, isFirstOrLast, color, indicator, trailingSpaceFormatter, emptyFirstOrLastLinePlaceholder) {\n  return line.length !== 0 ? color(indicator + ' ' + formatTrailingSpaces(line, trailingSpaceFormatter)) : indicator !== ' ' ? color(indicator) : isFirstOrLast && emptyFirstOrLastLinePlaceholder.length !== 0 ? color(indicator + ' ' + emptyFirstOrLastLinePlaceholder) : '';\n};\n\nvar printDeleteLine = function printDeleteLine(line, isFirstOrLast, _ref) {\n  var aColor = _ref.aColor,\n      aIndicator = _ref.aIndicator,\n      changeLineTrailingSpaceColor = _ref.changeLineTrailingSpaceColor,\n      emptyFirstOrLastLinePlaceholder = _ref.emptyFirstOrLastLinePlaceholder;\n  return printDiffLine(line, isFirstOrLast, aColor, aIndicator, changeLineTrailingSpaceColor, emptyFirstOrLastLinePlaceholder);\n};\n\nexports.printDeleteLine = printDeleteLine;\n\nvar printInsertLine = function printInsertLine(line, isFirstOrLast, _ref2) {\n  var bColor = _ref2.bColor,\n      bIndicator = _ref2.bIndicator,\n      changeLineTrailingSpaceColor = _ref2.changeLineTrailingSpaceColor,\n      emptyFirstOrLastLinePlaceholder = _ref2.emptyFirstOrLastLinePlaceholder;\n  return printDiffLine(line, isFirstOrLast, bColor, bIndicator, changeLineTrailingSpaceColor, emptyFirstOrLastLinePlaceholder);\n};\n\nexports.printInsertLine = printInsertLine;\n\nvar printCommonLine = function printCommonLine(line, isFirstOrLast, _ref3) {\n  var commonColor = _ref3.commonColor,\n      commonIndicator = _ref3.commonIndicator,\n      commonLineTrailingSpaceColor = _ref3.commonLineTrailingSpaceColor,\n      emptyFirstOrLastLinePlaceholder = _ref3.emptyFirstOrLastLinePlaceholder;\n  return printDiffLine(line, isFirstOrLast, commonColor, commonIndicator, commonLineTrailingSpaceColor, emptyFirstOrLastLinePlaceholder);\n};\n\nexports.printCommonLine = printCommonLine;\n\nvar hasCommonDiff = function hasCommonDiff(diffs, isMultiline) {\n  if (isMultiline) {\n    // Important: Ignore common newline that was appended to multiline strings!\n    var iLast = diffs.length - 1;\n    return diffs.some(function (diff, i) {\n      return diff[0] === _cleanupSemantic.DIFF_EQUAL && (i !== iLast || diff[1] !== '\\n');\n    });\n  }\n\n  return diffs.some(function (diff) {\n    return diff[0] === _cleanupSemantic.DIFF_EQUAL;\n  });\n};\n\nexports.hasCommonDiff = hasCommonDiff;\n\nvar countChanges = function countChanges(diffs) {\n  var a = 0;\n  var b = 0;\n  diffs.forEach(function (diff) {\n    switch (diff[0]) {\n      case _cleanupSemantic.DIFF_DELETE:\n        a += 1;\n        break;\n\n      case _cleanupSemantic.DIFF_INSERT:\n        b += 1;\n        break;\n    }\n  });\n  return {\n    a: a,\n    b: b\n  };\n};\n\nexports.countChanges = countChanges;\n\nvar printAnnotation = function printAnnotation(_ref4, changeCounts) {\n  var aAnnotation = _ref4.aAnnotation,\n      aColor = _ref4.aColor,\n      aIndicator = _ref4.aIndicator,\n      bAnnotation = _ref4.bAnnotation,\n      bColor = _ref4.bColor,\n      bIndicator = _ref4.bIndicator,\n      includeChangeCounts = _ref4.includeChangeCounts,\n      omitAnnotationLines = _ref4.omitAnnotationLines;\n\n  if (omitAnnotationLines) {\n    return '';\n  }\n\n  var aRest = '';\n  var bRest = '';\n\n  if (includeChangeCounts) {\n    var aCount = String(changeCounts.a);\n    var bCount = String(changeCounts.b); // Padding right aligns the ends of the annotations.\n\n    var baAnnotationLengthDiff = bAnnotation.length - aAnnotation.length;\n    var aAnnotationPadding = ' '.repeat(Math.max(0, baAnnotationLengthDiff));\n    var bAnnotationPadding = ' '.repeat(Math.max(0, -baAnnotationLengthDiff)); // Padding left aligns the ends of the counts.\n\n    var baCountLengthDiff = bCount.length - aCount.length;\n    var aCountPadding = ' '.repeat(Math.max(0, baCountLengthDiff));\n    var bCountPadding = ' '.repeat(Math.max(0, -baCountLengthDiff));\n    aRest = aAnnotationPadding + '  ' + aIndicator + ' ' + aCountPadding + aCount;\n    bRest = bAnnotationPadding + '  ' + bIndicator + ' ' + bCountPadding + bCount;\n  }\n\n  return aColor(aIndicator + ' ' + aAnnotation + aRest) + '\\n' + bColor(bIndicator + ' ' + bAnnotation + bRest) + '\\n\\n';\n};\n\nexports.printAnnotation = printAnnotation;\n\nvar printDiffLines = function printDiffLines(diffs, options) {\n  return printAnnotation(options, countChanges(diffs)) + (options.expand ? (0, _joinAlignedDiffs.joinAlignedDiffsExpand)(diffs, options) : (0, _joinAlignedDiffs.joinAlignedDiffsNoExpand)(diffs, options));\n}; // In GNU diff format, indexes are one-based instead of zero-based.\n\n\nexports.printDiffLines = printDiffLines;\n\nvar createPatchMark = function createPatchMark(aStart, aEnd, bStart, bEnd, _ref5) {\n  var patchColor = _ref5.patchColor;\n  return patchColor(\"@@ -\".concat(aStart + 1, \",\").concat(aEnd - aStart, \" +\").concat(bStart + 1, \",\").concat(bEnd - bStart, \" @@\"));\n}; // Compare two strings character-by-character.\n// Format as comparison lines in which changed substrings have inverse colors.\n\n\nexports.createPatchMark = createPatchMark;\n\nvar diffStringsUnified = function diffStringsUnified(a, b, options) {\n  if (a !== b && a.length !== 0 && b.length !== 0) {\n    var isMultiline = a.includes('\\n') || b.includes('\\n'); // getAlignedDiffs assumes that a newline was appended to the strings.\n\n    var diffs = diffStringsRaw(isMultiline ? a + '\\n' : a, isMultiline ? b + '\\n' : b, true // cleanupSemantic\n    );\n\n    if (hasCommonDiff(diffs, isMultiline)) {\n      var optionsNormalized = (0, _normalizeDiffOptions.normalizeDiffOptions)(options);\n      var lines = (0, _getAlignedDiffs.default)(diffs, optionsNormalized.changeColor);\n      return printDiffLines(lines, optionsNormalized);\n    }\n  } // Fall back to line-by-line diff.\n\n\n  return (0, _diffLines.diffLinesUnified)(a.split('\\n'), b.split('\\n'), options);\n}; // Compare two strings character-by-character.\n// Optionally clean up small common substrings, also known as chaff.\n\n\nexports.diffStringsUnified = diffStringsUnified;\n\nvar diffStringsRaw = function diffStringsRaw(a, b, cleanup) {\n  var diffs = (0, _diffStrings.default)(a, b);\n\n  if (cleanup) {\n    (0, _cleanupSemantic.cleanupSemantic)(diffs); // impure function\n  }\n\n  return diffs;\n};\n\nexports.diffStringsRaw = diffStringsRaw;","map":{"version":3,"sources":["/Users/sudesh/Documents/DEV2021/wacode/discovery-components-web/node_modules/ibm-cloud-sdk-core/node_modules/jest-diff/build/printDiffs.js"],"names":["Object","defineProperty","exports","value","diffStringsRaw","diffStringsUnified","createPatchMark","printDiffLines","printAnnotation","countChanges","hasCommonDiff","printCommonLine","printInsertLine","printDeleteLine","_cleanupSemantic","require","_diffLines","_diffStrings","_interopRequireDefault","_getAlignedDiffs","_joinAlignedDiffs","_normalizeDiffOptions","obj","__esModule","default","formatTrailingSpaces","line","trailingSpaceFormatter","replace","match","printDiffLine","isFirstOrLast","color","indicator","emptyFirstOrLastLinePlaceholder","length","aColor","aIndicator","changeLineTrailingSpaceColor","bColor","bIndicator","commonColor","commonIndicator","commonLineTrailingSpaceColor","diffs","isMultiline","iLast","some","diff","i","DIFF_EQUAL","a","b","forEach","DIFF_DELETE","DIFF_INSERT","changeCounts","aAnnotation","bAnnotation","includeChangeCounts","omitAnnotationLines","aRest","bRest","aCount","String","bCount","baAnnotationLengthDiff","aAnnotationPadding","repeat","Math","max","bAnnotationPadding","baCountLengthDiff","aCountPadding","bCountPadding","options","expand","joinAlignedDiffsExpand","joinAlignedDiffsNoExpand","aStart","aEnd","bStart","bEnd","patchColor","includes","optionsNormalized","normalizeDiffOptions","lines","changeColor","diffLinesUnified","split","cleanup","cleanupSemantic"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.diffStringsRaw = exports.diffStringsUnified = exports.createPatchMark = exports.printDiffLines = exports.printAnnotation = exports.countChanges = exports.hasCommonDiff = exports.printCommonLine = exports.printInsertLine = exports.printDeleteLine = void 0;\n\nvar _cleanupSemantic = require('./cleanupSemantic');\n\nvar _diffLines = require('./diffLines');\n\nvar _diffStrings = _interopRequireDefault(require('./diffStrings'));\n\nvar _getAlignedDiffs = _interopRequireDefault(require('./getAlignedDiffs'));\n\nvar _joinAlignedDiffs = require('./joinAlignedDiffs');\n\nvar _normalizeDiffOptions = require('./normalizeDiffOptions');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {default: obj};\n}\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst formatTrailingSpaces = (line, trailingSpaceFormatter) =>\n  line.replace(/\\s+$/, match => trailingSpaceFormatter(match));\n\nconst printDiffLine = (\n  line,\n  isFirstOrLast,\n  color,\n  indicator,\n  trailingSpaceFormatter,\n  emptyFirstOrLastLinePlaceholder\n) =>\n  line.length !== 0\n    ? color(\n        indicator + ' ' + formatTrailingSpaces(line, trailingSpaceFormatter)\n      )\n    : indicator !== ' '\n    ? color(indicator)\n    : isFirstOrLast && emptyFirstOrLastLinePlaceholder.length !== 0\n    ? color(indicator + ' ' + emptyFirstOrLastLinePlaceholder)\n    : '';\n\nconst printDeleteLine = (\n  line,\n  isFirstOrLast,\n  {\n    aColor,\n    aIndicator,\n    changeLineTrailingSpaceColor,\n    emptyFirstOrLastLinePlaceholder\n  }\n) =>\n  printDiffLine(\n    line,\n    isFirstOrLast,\n    aColor,\n    aIndicator,\n    changeLineTrailingSpaceColor,\n    emptyFirstOrLastLinePlaceholder\n  );\n\nexports.printDeleteLine = printDeleteLine;\n\nconst printInsertLine = (\n  line,\n  isFirstOrLast,\n  {\n    bColor,\n    bIndicator,\n    changeLineTrailingSpaceColor,\n    emptyFirstOrLastLinePlaceholder\n  }\n) =>\n  printDiffLine(\n    line,\n    isFirstOrLast,\n    bColor,\n    bIndicator,\n    changeLineTrailingSpaceColor,\n    emptyFirstOrLastLinePlaceholder\n  );\n\nexports.printInsertLine = printInsertLine;\n\nconst printCommonLine = (\n  line,\n  isFirstOrLast,\n  {\n    commonColor,\n    commonIndicator,\n    commonLineTrailingSpaceColor,\n    emptyFirstOrLastLinePlaceholder\n  }\n) =>\n  printDiffLine(\n    line,\n    isFirstOrLast,\n    commonColor,\n    commonIndicator,\n    commonLineTrailingSpaceColor,\n    emptyFirstOrLastLinePlaceholder\n  );\n\nexports.printCommonLine = printCommonLine;\n\nconst hasCommonDiff = (diffs, isMultiline) => {\n  if (isMultiline) {\n    // Important: Ignore common newline that was appended to multiline strings!\n    const iLast = diffs.length - 1;\n    return diffs.some(\n      (diff, i) =>\n        diff[0] === _cleanupSemantic.DIFF_EQUAL &&\n        (i !== iLast || diff[1] !== '\\n')\n    );\n  }\n\n  return diffs.some(diff => diff[0] === _cleanupSemantic.DIFF_EQUAL);\n};\n\nexports.hasCommonDiff = hasCommonDiff;\n\nconst countChanges = diffs => {\n  let a = 0;\n  let b = 0;\n  diffs.forEach(diff => {\n    switch (diff[0]) {\n      case _cleanupSemantic.DIFF_DELETE:\n        a += 1;\n        break;\n\n      case _cleanupSemantic.DIFF_INSERT:\n        b += 1;\n        break;\n    }\n  });\n  return {\n    a,\n    b\n  };\n};\n\nexports.countChanges = countChanges;\n\nconst printAnnotation = (\n  {\n    aAnnotation,\n    aColor,\n    aIndicator,\n    bAnnotation,\n    bColor,\n    bIndicator,\n    includeChangeCounts,\n    omitAnnotationLines\n  },\n  changeCounts\n) => {\n  if (omitAnnotationLines) {\n    return '';\n  }\n\n  let aRest = '';\n  let bRest = '';\n\n  if (includeChangeCounts) {\n    const aCount = String(changeCounts.a);\n    const bCount = String(changeCounts.b); // Padding right aligns the ends of the annotations.\n\n    const baAnnotationLengthDiff = bAnnotation.length - aAnnotation.length;\n    const aAnnotationPadding = ' '.repeat(Math.max(0, baAnnotationLengthDiff));\n    const bAnnotationPadding = ' '.repeat(Math.max(0, -baAnnotationLengthDiff)); // Padding left aligns the ends of the counts.\n\n    const baCountLengthDiff = bCount.length - aCount.length;\n    const aCountPadding = ' '.repeat(Math.max(0, baCountLengthDiff));\n    const bCountPadding = ' '.repeat(Math.max(0, -baCountLengthDiff));\n    aRest =\n      aAnnotationPadding + '  ' + aIndicator + ' ' + aCountPadding + aCount;\n    bRest =\n      bAnnotationPadding + '  ' + bIndicator + ' ' + bCountPadding + bCount;\n  }\n\n  return (\n    aColor(aIndicator + ' ' + aAnnotation + aRest) +\n    '\\n' +\n    bColor(bIndicator + ' ' + bAnnotation + bRest) +\n    '\\n\\n'\n  );\n};\n\nexports.printAnnotation = printAnnotation;\n\nconst printDiffLines = (diffs, options) =>\n  printAnnotation(options, countChanges(diffs)) +\n  (options.expand\n    ? (0, _joinAlignedDiffs.joinAlignedDiffsExpand)(diffs, options)\n    : (0, _joinAlignedDiffs.joinAlignedDiffsNoExpand)(diffs, options)); // In GNU diff format, indexes are one-based instead of zero-based.\n\nexports.printDiffLines = printDiffLines;\n\nconst createPatchMark = (aStart, aEnd, bStart, bEnd, {patchColor}) =>\n  patchColor(\n    `@@ -${aStart + 1},${aEnd - aStart} +${bStart + 1},${bEnd - bStart} @@`\n  ); // Compare two strings character-by-character.\n// Format as comparison lines in which changed substrings have inverse colors.\n\nexports.createPatchMark = createPatchMark;\n\nconst diffStringsUnified = (a, b, options) => {\n  if (a !== b && a.length !== 0 && b.length !== 0) {\n    const isMultiline = a.includes('\\n') || b.includes('\\n'); // getAlignedDiffs assumes that a newline was appended to the strings.\n\n    const diffs = diffStringsRaw(\n      isMultiline ? a + '\\n' : a,\n      isMultiline ? b + '\\n' : b,\n      true // cleanupSemantic\n    );\n\n    if (hasCommonDiff(diffs, isMultiline)) {\n      const optionsNormalized = (0, _normalizeDiffOptions.normalizeDiffOptions)(\n        options\n      );\n      const lines = (0, _getAlignedDiffs.default)(\n        diffs,\n        optionsNormalized.changeColor\n      );\n      return printDiffLines(lines, optionsNormalized);\n    }\n  } // Fall back to line-by-line diff.\n\n  return (0, _diffLines.diffLinesUnified)(\n    a.split('\\n'),\n    b.split('\\n'),\n    options\n  );\n}; // Compare two strings character-by-character.\n// Optionally clean up small common substrings, also known as chaff.\n\nexports.diffStringsUnified = diffStringsUnified;\n\nconst diffStringsRaw = (a, b, cleanup) => {\n  const diffs = (0, _diffStrings.default)(a, b);\n\n  if (cleanup) {\n    (0, _cleanupSemantic.cleanupSemantic)(diffs); // impure function\n  }\n\n  return diffs;\n};\n\nexports.diffStringsRaw = diffStringsRaw;\n"]},"metadata":{},"sourceType":"script"}